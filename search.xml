<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Zephyrå…¥é—¨ ç§»æ¤æ­£ç‚¹åŸå­æ¢ç´¢è€…STM32F407</title>
    <url>/2026/01/22/%E5%B5%8C%E5%85%A5%E5%BC%8F/zephyr%E5%85%A5%E9%97%A8_%E7%A7%BB%E6%A4%8D%E6%AD%A3%E7%82%B9%E5%8E%9F%E5%AD%90%E6%8E%A2%E7%B4%A2%E8%80%85STM32F407/</url>
    <content><![CDATA[<blockquote>
<p>ç¯å¢ƒ: <code>Windows</code>/<code>WSL2 ubuntu20.4</code><br>å¼€å‘æ¿: æ­£ç‚¹åŸå­æ¢ç´¢è€…<code>STM32F407</code></p>
</blockquote>
<blockquote>
<p>åœ¨åµŒå…¥å¼å¼€å‘é¢†åŸŸï¼Œ<strong>Zephyr RTOS</strong> æ˜¯ä¸€ä¸ªè½»é‡çº§ã€æ¨¡å—åŒ–ä¸”é«˜åº¦å¯å®šåˆ¶çš„å®æ—¶æ“ä½œç³»ç»Ÿï¼ˆRTOSï¼‰ï¼Œä¸“ä¸ºèµ„æºå—é™çš„ç‰©è”ç½‘ï¼ˆIoTï¼‰å’ŒåµŒå…¥å¼è®¾å¤‡è®¾è®¡ã€‚</p>
</blockquote>
<span id="more"></span>



<h2 id="æ­å»ºå¼€å‘ç¯å¢ƒ"><a href="#æ­å»ºå¼€å‘ç¯å¢ƒ" class="headerlink" title="æ­å»ºå¼€å‘ç¯å¢ƒ"></a>æ­å»ºå¼€å‘ç¯å¢ƒ</h2><blockquote>
<p>å‚è€ƒå®˜æ–¹æ–‡æ¡£&lt;<a href="https://docs.zephyrproject.org/latest/develop/getting_started/index.html">Getting Started Guide</a>&gt;</p>
</blockquote>
<h3 id="ubuntuå®‰è£…å·¥å…·åŒ…"><a href="#ubuntuå®‰è£…å·¥å…·åŒ…" class="headerlink" title="ubuntuå®‰è£…å·¥å…·åŒ…"></a>ubuntuå®‰è£…å·¥å…·åŒ…</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install --no-install-recommends git cmake ninja-build gperf \</span><br><span class="line">  ccache dfu-util device-tree-compiler wget python3-dev python3-venv python3-tk \</span><br><span class="line">  xz-utils file make gcc gcc-multilib g++-multilib libsdl2-dev libmagic1</span><br></pre></td></tr></table></figure>

<ul>
<li>è¡¥å……å®‰è£…<code>cmake</code>ã€<code>python</code>ã€<code>dtc</code></li>
</ul>
<blockquote>
<p>è¿™ä¸‰ä¸ªå·¥å…·è¦æ»¡è¶³ç‰ˆæœ¬è¦æ±‚, å¦åˆ™åç»­æ“ä½œä¼šå‡ºé”™</p>
</blockquote>
<p>å®˜ç½‘ç‰ˆæœ¬è¦æ±‚</p>
<table>
<thead>
<tr>
<th>Tool</th>
<th>Min. Version</th>
</tr>
</thead>
<tbody><tr>
<td><a href="https://cmake.org/">CMake</a></td>
<td>3.20.5</td>
</tr>
<tr>
<td><a href="https://www.python.org/">Python</a></td>
<td>3.10</td>
</tr>
<tr>
<td><a href="https://www.devicetree.org/">Devicetree compiler</a></td>
<td>1.4.6</td>
</tr>
</tbody></table>
<p>1ã€pythonï¼š<a href="https://blog.csdn.net/weixin_45606191/article/details/129840222">Ubuntu20.04ä¸‹æ›´æ–°ç³»ç»ŸPythonç‰ˆæœ¬_ubuntu20.04 pythonç‰ˆæœ¬-CSDNåšå®¢</a><br>2ã€cmakeï¼š<a href="https://zhuanlan.zhihu.com/p/519732843">ubuntu 20.04å®‰è£…(å‡çº§)cmake - çŸ¥ä¹</a>  </p>
<ul>
<li>å®‰è£…å®ŒéªŒè¯</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">cmake --version</span><br><span class="line">python3 --version</span><br><span class="line">dtc --version</span><br></pre></td></tr></table></figure>


<h3 id="è™šæ‹Ÿç¯å¢ƒæ‹‰å–æºç å’ŒåŒ…-å®‰è£…SDK"><a href="#è™šæ‹Ÿç¯å¢ƒæ‹‰å–æºç å’ŒåŒ…-å®‰è£…SDK" class="headerlink" title="è™šæ‹Ÿç¯å¢ƒæ‹‰å–æºç å’ŒåŒ… & å®‰è£…SDK"></a>è™šæ‹Ÿç¯å¢ƒæ‹‰å–æºç å’ŒåŒ… &amp; å®‰è£…SDK</h3><p>1ã€åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒ</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">python3 -m venv ~/zephyrproject/.venv</span><br></pre></td></tr></table></figure>
<p>2ã€æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/zephyrproject/.venv/bin/activate</span><br></pre></td></tr></table></figure>
<blockquote>
<p>â—<code>python --version</code>å†éªŒè¯ä¸€ä¸‹pythonçš„ç‰ˆæœ¬</p>
</blockquote>
<p>3ã€å®‰è£…ç®¡ç†zephyrçš„åº“å·¥å…·west</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pip install west</span><br></pre></td></tr></table></figure>
<p>4ã€æ‹‰å–<code>Zephyr</code>æºä»£ç </p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">west init ~/zephyrproject</span><br><span class="line"><span class="built_in">cd</span> ~/zephyrproject</span><br><span class="line">west update</span><br></pre></td></tr></table></figure>
<p>5ã€å¯¼å‡º<code>Zephyr</code>çš„åŒ…Package</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">west zephyr-export</span><br></pre></td></tr></table></figure>
<p>6ã€å®‰è£…<code>python</code>ä¾èµ–</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">west packages pip --install</span><br></pre></td></tr></table></figure>
<p>7ã€å®‰è£…<code>SDK</code></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/zephyrproject/zephyr</span><br><span class="line">west sdk install</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…USBé€ä¼ å·¥å…·-ST-LINKä¸‹è½½å·¥å…·"><a href="#å®‰è£…USBé€ä¼ å·¥å…·-ST-LINKä¸‹è½½å·¥å…·" class="headerlink" title="å®‰è£…USBé€ä¼ å·¥å…· & ST-LINKä¸‹è½½å·¥å…·"></a>å®‰è£…USBé€ä¼ å·¥å…· &amp; ST-LINKä¸‹è½½å·¥å…·</h3><blockquote>
<p>ç”±äºé‡‡ç”¨çš„æ˜¯<code>ST-LINK</code>, è¦åœ¨<code>WSL2</code>ç¯å¢ƒä¸‹è½½ç¨‹åºéœ€è¦å®‰è£…<code>stm32cubeprogrammer</code><br>åŒæ—¶è¿˜éœ€è¦æŠŠ<code>ST-LINK</code>é€ä¼ åˆ°<code>WSL2</code>é‡Œ</p>
</blockquote>
<h4 id="å®‰è£…USBé€ä¼ å·¥å…·"><a href="#å®‰è£…USBé€ä¼ å·¥å…·" class="headerlink" title="å®‰è£…USBé€ä¼ å·¥å…·"></a>å®‰è£…USBé€ä¼ å·¥å…·</h4><ul>
<li>1ã€ç®¡ç†å‘˜æ‰“å¼€<code>powershell</code>å®‰è£…</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">winget install --interactive --exact dorssel.usbipd-win</span><br></pre></td></tr></table></figure>

<ul>
<li>2ã€æ’å…¥ST-LINK, ç»ˆç«¯ä¾æ¬¡è¾“å…¥</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">usbipd list // æŸ¥çœ‹usbåˆ—è¡¨</span><br><span class="line">usbipd <span class="built_in">bind</span> -b &lt;bus_id&gt; // å…±äº«USBè®¾å¤‡</span><br><span class="line">usbipd attach -b &lt;bus_id&gt; --wsl // å…±äº«åˆ°WSLé‡Œ</span><br></pre></td></tr></table></figure>

<img data-src="/2026/01/22/%E5%B5%8C%E5%85%A5%E5%BC%8F/zephyr%E5%85%A5%E9%97%A8_%E7%A7%BB%E6%A4%8D%E6%AD%A3%E7%82%B9%E5%8E%9F%E5%AD%90%E6%8E%A2%E7%B4%A2%E8%80%85STM32F407/2026-01-22-14-35-47.png" class="">

<ul>
<li>3ã€æ‰“å¼€<code>WSL2</code>ï¼Œè¾“å…¥<code>lsusb</code>ï¼Œèƒ½çœ‹åˆ°<code>stlink</code>å³å¯</li>
</ul>
<img data-src="/2026/01/22/%E5%B5%8C%E5%85%A5%E5%BC%8F/zephyr%E5%85%A5%E9%97%A8_%E7%A7%BB%E6%A4%8D%E6%AD%A3%E7%82%B9%E5%8E%9F%E5%AD%90%E6%8E%A2%E7%B4%A2%E8%80%85STM32F407/2026-01-22-14-37-34.png" class="">

<h4 id="å®‰è£…ST-LINKä¸‹è½½å·¥å…·"><a href="#å®‰è£…ST-LINKä¸‹è½½å·¥å…·" class="headerlink" title="å®‰è£…ST-LINKä¸‹è½½å·¥å…·"></a>å®‰è£…ST-LINKä¸‹è½½å·¥å…·</h4><ul>
<li><p>1ã€ä¸‹è½½ <code>SetupSTM32CubeProgrammer-2.20.0.linux</code></p>
<ul>
<li><a href="https://www.st.com/en/development-tools/stm32cubeprog.html">https://www.st.com/en/development-tools/stm32cubeprog.html</a></li>
</ul>
</li>
<li><p>2ã€è§£å‹ï¼šunzip</p>
</li>
<li><p>3ã€æ‰§è¡Œå®‰è£…è„šæœ¬</p>
<ul>
<li><code>SetupSTM32CubeProgrammer-2.20.0.linux</code></li>
<li>å‡ºç°äº¤äº’ç•Œé¢ï¼Œç¡®è®¤å®‰è£…å³å¯</li>
</ul>
</li>
<li><p>4ã€æ·»åŠ ç¯å¢ƒç›®å½•</p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'export PATH=$PATH:$HOME/STMicroelectronics/STM32Cube/STM32CubeProgrammer/bin'</span> &gt;&gt; ~/.bashrc <span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>

<ul>
<li>æµ‹è¯• <code>STM32_Programmer_CLI --version</code></li>
</ul>
<h3 id="ç¼–è¯‘å·¥ç¨‹çƒ§å½•æµ‹è¯•"><a href="#ç¼–è¯‘å·¥ç¨‹çƒ§å½•æµ‹è¯•" class="headerlink" title="ç¼–è¯‘å·¥ç¨‹çƒ§å½•æµ‹è¯•"></a>ç¼–è¯‘å·¥ç¨‹çƒ§å½•æµ‹è¯•</h3><ul>
<li>é€‰æ‹©<code>stm32f4_disco</code>å¼€å‘æ¿ç¼–è¯‘<code>blinky</code>ä¾‹ç¨‹<ul>
<li><code>west build -p always -b stm32f4_disco samples/basic/blinky</code></li>
</ul>
</li>
<li>çƒ§å½•<code>west flash</code></li>
</ul>
<blockquote>
<p>â—å¦‚æœusbæ— æƒé™ï¼Œå¯ä¸´æ—¶ä¿®æ”¹usbæƒé™<br><code>sudo chmod 666 /dev/bus/usb/001/003</code> # æ ¹æ®ä½ çš„è®¾å¤‡è·¯å¾„è°ƒæ•´</p>
</blockquote>
<img data-src="/2026/01/22/%E5%B5%8C%E5%85%A5%E5%BC%8F/zephyr%E5%85%A5%E9%97%A8_%E7%A7%BB%E6%A4%8D%E6%AD%A3%E7%82%B9%E5%8E%9F%E5%AD%90%E6%8E%A2%E7%B4%A2%E8%80%85STM32F407/2026-01-22-14-41-51.png" class="">

<ul>
<li>çƒ§å½•æˆåŠŸå³è·‘é€š, æ¥ä¸‹æ¥æˆ‘ä»¬é€‚é…æ¢ç´¢è€…å¼€å‘æ¿</li>
</ul>
<h2 id="é€‚é…æ­£ç‚¹åŸå­æ¢ç´¢è€…å¼€å‘æ¿"><a href="#é€‚é…æ­£ç‚¹åŸå­æ¢ç´¢è€…å¼€å‘æ¿" class="headerlink" title="é€‚é…æ­£ç‚¹åŸå­æ¢ç´¢è€…å¼€å‘æ¿"></a>é€‚é…æ­£ç‚¹åŸå­æ¢ç´¢è€…å¼€å‘æ¿</h2><blockquote>
<p>æ¢ç´¢è€…å¼€å‘æ¿åŸºäºSTM32F4, æ‰€ä»¥æˆ‘ä»¬æ‰¾ä¸€ä¸ªç±»ä¼¼çš„å¼€å‘æ¿è¿›è¡Œä¿®æ”¹å³å¯</p>
</blockquote>
<p>æ‰“å¼€<code>zephyr</code>æºç è·¯å¾„ä¸‹<code>boards/st</code>, ä»<code>stm32f072b_disco</code>æ‹·è´åˆ°æ–°å»ºæ–‡ä»¶å¤¹<code>stm32f407_alientek</code>, ä¸”å°†å‡ ä¸ªæ–‡ä»¶ä¿®æ”¹ä¸ºå’Œæ–‡ä»¶å¤¹åä¸€è‡´, å‚è€ƒä¸‹é¢</p>
<img data-src="/2026/01/22/%E5%B5%8C%E5%85%A5%E5%BC%8F/zephyr%E5%85%A5%E9%97%A8_%E7%A7%BB%E6%A4%8D%E6%AD%A3%E7%82%B9%E5%8E%9F%E5%AD%90%E6%8E%A2%E7%B4%A2%E8%80%85STM32F407/2026-01-22-14-45-21.png" class="">

<p>ä¿®æ”¹ä»¥ä¸‹å‡ ä¸ªæ–‡ä»¶</p>
<ul>
<li><code>board.cmake</code></li>
<li><code>board.yml</code></li>
<li><code>Kconfig.defconfig</code></li>
<li><code>Kconfig.stm32f407_alientek</code></li>
<li><code>stm32f407_alientek_defconfig</code></li>
<li><code>stm32f407_alientek.dts</code></li>
<li><code>stm32f407_alientek.yaml</code></li>
</ul>
<hr>
<ul>
<li><code>board.cmake</code></li>
</ul>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment"># SPDX-License-Identifier: Apache-2.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># keep first</span></span><br><span class="line">board_runner_args(stm32cubeprogrammer <span class="string">"--port=swd"</span> <span class="string">"--reset-mode=hw"</span>)</span><br><span class="line">board_runner_args(jlink <span class="string">"--device=STM32F407VG"</span> <span class="string">"--speed=4000"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># keep first</span></span><br><span class="line"><span class="keyword">include</span>(<span class="variable">${ZEPHYR_BASE}</span>/boards/common/stm32cubeprogrammer.board.cmake)</span><br><span class="line"><span class="keyword">include</span>(<span class="variable">${ZEPHYR_BASE}</span>/boards/common/openocd-stm32.board.cmake)</span><br><span class="line"><span class="keyword">include</span>(<span class="variable">${ZEPHYR_BASE}</span>/boards/common/jlink.board.cmake)</span><br><span class="line"><span class="keyword">include</span>(<span class="variable">${ZEPHYR_BASE}</span>/boards/common/stlink_gdbserver.board.cmake)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>board.yml</code></li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">board:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">stm32f407_alientek</span></span><br><span class="line">  <span class="attr">full_name:</span> <span class="string">STM32F407</span> <span class="string">ALIENTEK</span></span><br><span class="line">  <span class="attr">vendor:</span> <span class="string">st</span></span><br><span class="line">  <span class="attr">socs:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">stm32f407xx</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>Kconfig.defconfig</code></li>
</ul>
<figure class="highlight autoit"><table><tr><td class="code"><pre><span class="line"><span class="meta"># STM32F072B-DISCO board configuration</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># Copyright (c) 2017 Clage GmbH</span></span><br><span class="line"><span class="meta"># SPDX-License-Identifier: Apache-2.0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> BOARD_STM32F4_ALIENTEK</span><br><span class="line"></span><br><span class="line"><span class="keyword">endif</span> <span class="meta"># </span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>Kconfig.stm32f407_alientek</code></li>
</ul>
<figure class="highlight mipsasm"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Copyright (c) 2016 Linaro Limited.</span></span><br><span class="line"><span class="comment"># SPDX-License-Identifier: Apache-2.0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">config</span> <span class="keyword">BOARD_STM32F407_ALIENTEK</span></span><br><span class="line"><span class="keyword"></span>	select SOC_STM<span class="symbol">32F</span>407XG</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>stm32f407_alientek_defconfig</code></li>
</ul>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="comment"># SPDX-License-Identifier: Apache-2.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable MPU</span></span><br><span class="line"><span class="attr">CONFIG_ARM_MPU</span>=n</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable HW stack protection</span></span><br><span class="line"><span class="attr">CONFIG_HW_STACK_PROTECTION</span>=n</span><br><span class="line"></span><br><span class="line"><span class="attr">CONFIG_SERIAL</span>=y</span><br><span class="line"></span><br><span class="line"><span class="comment"># console</span></span><br><span class="line"><span class="attr">CONFIG_CONSOLE</span>=y</span><br><span class="line"><span class="attr">CONFIG_UART_CONSOLE</span>=y</span><br><span class="line"></span><br><span class="line"><span class="comment"># enable GPIO</span></span><br><span class="line"><span class="attr">CONFIG_GPIO</span>=y</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>stm32f407_alientek.dts</code></li>
</ul>
<blockquote>
<p>æ‹·è´<code>boards/st/stm32f4_disco</code>åº•ä¸‹çš„<code>stm32f4_disco.dts</code></p>
</blockquote>
<p>ä¿®æ”¹<code>led0</code>æ˜ å°„çš„<code>green_led_4</code>, æ¢ç´¢è€…çš„LED0æ¥çš„æ˜¯PF9å¼•è„š, ä½ç”µå¹³ä½¿èƒ½</p>
<figure class="highlight dts"><table><tr><td class="code"><pre><span class="line"><span class="symbol">green_led_4:</span> <span class="title class_">led_4</span> <span class="punctuation">{</span></span><br><span class="line">	<span class="attr">gpios</span> <span class="operator">=</span> <span class="params">&lt;<span class="variable">&amp;gpiof</span> <span class="number">9</span> GPIO_ACTIVE_LOW&gt;</span><span class="punctuation">;</span></span><br><span class="line">	<span class="attr">label</span> <span class="operator">=</span> <span class="string">"User LD4"</span><span class="punctuation">;</span></span><br><span class="line"><span class="punctuation">};</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹è®¾å¤‡æ ‘é‡Œçš„å¤–éƒ¨æ—¶é’Ÿå’Œç³»ç»Ÿæ—¶é’Ÿ, HSEæ—¶é’Ÿæ™¶æŒ¯ä¸º<code>25M</code></p>
<blockquote>
<p>â—è¿™é‡Œæ ¹æ®å®é™…æ™¶æŒ¯æ•°å€¼æ¥, å¦‚æœæ™¶æŒ¯æ˜¯8Må°±ä¸ç”¨æ”¹</p>
</blockquote>
<figure class="highlight dts"><table><tr><td class="code"><pre><span class="line"><span class="variable">&amp;clk_hse</span> <span class="punctuation">{</span></span><br><span class="line">	<span class="attr">clock-frequency</span> <span class="operator">=</span> <span class="params">&lt;DT_FREQ_M(<span class="number">25</span>)&gt;</span><span class="punctuation">;</span></span><br><span class="line">	<span class="attr">status</span> <span class="operator">=</span> <span class="string">"okay"</span><span class="punctuation">;</span></span><br><span class="line"><span class="punctuation">};</span></span><br><span class="line"></span><br><span class="line"><span class="variable">&amp;rcc</span> <span class="punctuation">{</span></span><br><span class="line">	<span class="attr">clocks</span> <span class="operator">=</span> <span class="params">&lt;<span class="variable">&amp;pll</span>&gt;</span><span class="punctuation">;</span></span><br><span class="line">	<span class="attr">clock-frequency</span> <span class="operator">=</span> <span class="params">&lt;DT_FREQ_M(<span class="number">168</span>)&gt;</span><span class="punctuation">;</span></span><br><span class="line">	<span class="attr">ahb-prescaler</span> <span class="operator">=</span> <span class="params">&lt;<span class="number">1</span>&gt;</span><span class="punctuation">;</span></span><br><span class="line">	apb1-<span class="attr">prescaler</span> <span class="operator">=</span> <span class="params">&lt;<span class="number">4</span>&gt;</span><span class="punctuation">;</span></span><br><span class="line">	apb2-<span class="attr">prescaler</span> <span class="operator">=</span> <span class="params">&lt;<span class="number">2</span>&gt;</span><span class="punctuation">;</span></span><br><span class="line"><span class="punctuation">};</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹é”ç›¸ç¯PLLå‚æ•°</p>
<blockquote>
<p>â—è¿™é‡Œæ ¹æ®å®é™…æ™¶æŒ¯æ•°å€¼æ¥, å¦‚æœæ™¶æŒ¯æ˜¯8Må°±ä¸ç”¨æ”¹</p>
</blockquote>
<figure class="highlight dts"><table><tr><td class="code"><pre><span class="line"><span class="variable">&amp;pll</span> <span class="punctuation">{</span></span><br><span class="line">	<span class="attr">div-m</span> <span class="operator">=</span> <span class="params">&lt;<span class="number">25</span>&gt;</span><span class="punctuation">;</span></span><br><span class="line">	<span class="attr">mul-n</span> <span class="operator">=</span> <span class="params">&lt;<span class="number">336</span>&gt;</span><span class="punctuation">;</span></span><br><span class="line">	<span class="attr">div-p</span> <span class="operator">=</span> <span class="params">&lt;<span class="number">2</span>&gt;</span><span class="punctuation">;</span></span><br><span class="line">	<span class="attr">div-q</span> <span class="operator">=</span> <span class="params">&lt;<span class="number">7</span>&gt;</span><span class="punctuation">;</span></span><br><span class="line">	<span class="attr">clocks</span> <span class="operator">=</span> <span class="params">&lt;<span class="variable">&amp;clk_hse</span>&gt;</span><span class="punctuation">;</span></span><br><span class="line">	<span class="attr">status</span> <span class="operator">=</span> <span class="string">"okay"</span><span class="punctuation">;</span></span><br><span class="line"><span class="punctuation">};</span></span><br></pre></td></tr></table></figure>


<ul>
<li><code>stm32f407_alientek.yaml</code></li>
</ul>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">identifier:</span> <span class="string">stm32f407_alientek</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">ST</span> <span class="string">STM32F4</span> <span class="string">ALIENTEK</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">mcu</span></span><br><span class="line"><span class="attr">arch:</span> <span class="string">arm</span></span><br><span class="line"><span class="attr">toolchain:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">zephyr</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">gnuarmemb</span></span><br><span class="line"><span class="attr">ram:</span> <span class="number">128</span></span><br><span class="line"><span class="attr">flash:</span> <span class="number">1024</span></span><br><span class="line"><span class="attr">supported:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">can</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">pwm</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">counter</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">adc</span></span><br><span class="line"><span class="attr">vendor:</span> <span class="string">st</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹å®Œä¹‹åè¿›è¡Œç¼–è¯‘</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">west build -p always -b stm32f407_alientek samples/basic/blinky</span><br></pre></td></tr></table></figure>

<img data-src="/2026/01/22/%E5%B5%8C%E5%85%A5%E5%BC%8F/zephyr%E5%85%A5%E9%97%A8_%E7%A7%BB%E6%A4%8D%E6%AD%A3%E7%82%B9%E5%8E%9F%E5%AD%90%E6%8E%A2%E7%B4%A2%E8%80%85STM32F407/2026-01-22-15-58-08.png" class="">

<p>çƒ§å½•</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">west flash</span><br></pre></td></tr></table></figure>

<img data-src="/2026/01/22/%E5%B5%8C%E5%85%A5%E5%BC%8F/zephyr%E5%85%A5%E9%97%A8_%E7%A7%BB%E6%A4%8D%E6%AD%A3%E7%82%B9%E5%8E%9F%E5%AD%90%E6%8E%A2%E7%B4%A2%E8%80%85STM32F407/2026-01-22-15-58-38.png" class="">

<p>è§‚å¯Ÿå¼€å‘æ¿ç¯é—ªçƒ</p>
<h3 id="é€‚é…ä¸²å£æ‰“å°"><a href="#é€‚é…ä¸²å£æ‰“å°" class="headerlink" title="é€‚é…ä¸²å£æ‰“å°"></a>é€‚é…ä¸²å£æ‰“å°</h3><blockquote>
<p>æ­£ç‚¹åŸå­çš„æ‰“å°ä¸²å£è¿æ¥çš„æ˜¯UART1</p>
</blockquote>
<p>æ‰€ä»¥ä¿®æ”¹è®¾å¤‡æ ‘, å¢åŠ å¦‚ä¸‹ä»£ç </p>
<figure class="highlight dts"><table><tr><td class="code"><pre><span class="line">	<span class="title class_">chosen</span> <span class="punctuation">{</span></span><br><span class="line">		<span class="attr">zephyr,console</span> <span class="operator">=</span> <span class="variable">&amp;usart1</span><span class="punctuation">;</span></span><br><span class="line">		<span class="attr">zephyr,shell-uart</span> <span class="operator">=</span> <span class="variable">&amp;usart1</span><span class="punctuation">;</span></span><br><span class="line">		...</span><br><span class="line">	<span class="punctuation">};</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="variable">&amp;usart1</span> <span class="punctuation">{</span></span><br><span class="line">    pinctrl<span class="number">-0</span> = <span class="params">&lt;<span class="variable">&amp;usart1_tx_pa9</span> <span class="variable">&amp;usart1_rx_pa10</span>&gt;</span><span class="punctuation">;</span></span><br><span class="line">    <span class="attr">pinctrl-names</span> <span class="operator">=</span> <span class="string">"default"</span><span class="punctuation">;</span></span><br><span class="line">    <span class="attr">current-speed</span> <span class="operator">=</span> <span class="params">&lt;<span class="number">115200</span>&gt;</span><span class="punctuation">;</span></span><br><span class="line">    <span class="attr">status</span> <span class="operator">=</span> <span class="string">"okay"</span><span class="punctuation">;</span></span><br><span class="line"><span class="punctuation">};</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç¼–è¯‘, çƒ§å½•, æµ‹è¯•å¦‚ä¸‹</p>
<img data-src="/2026/01/22/%E5%B5%8C%E5%85%A5%E5%BC%8F/zephyr%E5%85%A5%E9%97%A8_%E7%A7%BB%E6%A4%8D%E6%AD%A3%E7%82%B9%E5%8E%9F%E5%AD%90%E6%8E%A2%E7%B4%A2%E8%80%85STM32F407/2026-01-23-10-58-43.png" class="">


<h2 id="è¡¥å……-windowsæ­å»ºå¼€å‘ç¯å¢ƒ"><a href="#è¡¥å……-windowsæ­å»ºå¼€å‘ç¯å¢ƒ" class="headerlink" title="è¡¥å……: windowsæ­å»ºå¼€å‘ç¯å¢ƒ"></a>è¡¥å……: windowsæ­å»ºå¼€å‘ç¯å¢ƒ</h2><blockquote>
<p>å®æµ‹windowsç¼–è¯‘é€Ÿåº¦æ¯”ä¸ä¸Šlinux, æ‰€ä»¥è¿˜æ˜¯æ¨èç”¨linuxåšå¼€å‘</p>
</blockquote>
<ul>
<li>æ‰“å¼€cmd, å®‰è£…å¿…è¦çš„åŒ…</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">winget install Kitware.CMake Ninja-build.Ninja oss-winget.gperf Python.Python.3.12 Git.Git oss-winget.dtc wget 7zip.7zip</span><br></pre></td></tr></table></figure>

<ul>
<li>éªŒè¯å·¥å…·ç‰ˆæœ¬</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">cmake --version</span><br><span class="line">python --version</span><br><span class="line">dtc --version</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¿€æ´»<code>python</code>è™šæ‹Ÿç¯å¢ƒ</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$Env</span>:HOMEPATH // å¯ä»¥é€‰æ‹©è‡ªå·±çš„è·¯å¾„</span><br><span class="line">python -m venv zephyrproject\.venv</span><br><span class="line">zephyrproject\.venv\Scripts\Activate.ps1</span><br></pre></td></tr></table></figure>

<ul>
<li>å®‰è£…</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">pip install west</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">west init zephyrproject</span><br><span class="line"><span class="built_in">cd</span> zephyrproject</span><br><span class="line">west update</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">west zephyr-export</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">python -m pip install @((west packages pip) -split ' ')</span><br></pre></td></tr></table></figure>

<ul>
<li>å®‰è£…SDK</li>
</ul>
<blockquote>
<p>å› ä¸ºæŒ‰ç…§SDKä¼šé»˜è®¤å®‰è£…åœ¨Cç›˜è·¯å¾„(ä¸åœ¨ä¹ç©ºé—´å ç”¨çš„å¯ä»¥é»˜è®¤), æ‰€ä»¥é‡‡ç”¨æ‰‹åŠ¨å®‰è£…<br>å‚è€ƒ: <a href="https://docs.zephyrproject.org/latest/develop/toolchains/zephyr_sdk.html#toolchain-zephyr-sdk-install">https://docs.zephyrproject.org/latest/develop/toolchains/zephyr_sdk.html#toolchain-zephyr-sdk-install</a>  </p>
</blockquote>
<p>ä¸‹è½½SDKåŒ…, è§£å‹åè¿›å…¥æ‰§è¡Œ<code>./setup.cmd</code><br>ç„¶åæ³¨å†Œ<code>ZEPHYR_SDK_INSTALL_DIR</code>ç¯å¢ƒå˜é‡, æ³¨å†Œä¸Šé¢SDKå­˜æ”¾çš„è·¯å¾„<br>æ³¨å†Œå®Œä¹‹åè¦é‡æ–°æ‰“å¼€ç»ˆç«¯  </p>
<ul>
<li>è¿›å…¥zephyrè·¯å¾„, ç¼–è¯‘æµ‹è¯•</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">west build -p always -b stm32f4_disco samples/basic/blinky</span><br></pre></td></tr></table></figure>


<h2 id="ğŸ“Œå‚è€ƒèµ„æ–™"><a href="#ğŸ“Œå‚è€ƒèµ„æ–™" class="headerlink" title="ğŸ“Œå‚è€ƒèµ„æ–™"></a>ğŸ“Œå‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://docs.zephyrproject.org/latest/">zephyrå®˜æ–¹æ–‡æ¡£</a></li>
</ul>
<link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css"><script src="https://fastly.jsdelivr.net/npm/d3@7"></script><script src="https://fastly.jsdelivr.net/npm/markmap-view@0.18.10"></script><script src="https://fastly.jsdelivr.net/npm/markmap-toolbar@0.18.10"></script>
<link rel="stylesheet" href="/css/markmap.css">

<script src="/js/markmap.js"></script>
]]></content>
      <categories>
        <category>åµŒå…¥å¼</category>
      </categories>
  </entry>
</search>
